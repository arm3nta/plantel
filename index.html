// Código HTML y CSS igual...

<!-- Agregamos una nueva ventana para editar -->
<div id="ventanaModificar" class="seccion ventana">
  <h3>Modificar Plantel</h3>
  <label>Documentos Faltantes</label>
  <div style="display: flex; flex-wrap: wrap; gap: 10px;">
    <label><input type="checkbox" class="mod-checkbox" value="ACTUALIZACIÓN DE DATOS"> ACTUALIZACIÓN DE DATOS</label>
    <label><input type="checkbox" class="mod-checkbox" value="OFERTA EDUCATIVA"> OFERTA EDUCATIVA</label>
    <label><input type="checkbox" class="mod-checkbox" value="LISTADO DE CARRERAS"> LISTADO DE CARRERAS</label>
    <label><input type="checkbox" class="mod-checkbox" value="CONTRATO DE ARRENDAMIENTO"> CONTRATO DE ARRENDAMIENTO</label>
    <label><input type="checkbox" class="mod-checkbox" value="RVOE ACTUALIZADO"> RVOE ACTUALIZADO</label>
    <label><input type="checkbox" class="mod-checkbox" value="CCT"> CCT</label>
    <label><input type="checkbox" class="mod-checkbox" value="COMPROBANTE DE DOMICILIO"> COMPROBANTE DE DOMICILIO</label>
    <label><input type="checkbox" class="mod-checkbox" value="INFORME FOTOGRÁFICO"> INFORME FOTOGRÁFICO</label>
  </div>

  <label>Anotaciones</label>
  <textarea id="modAnotaciones" rows="4" placeholder="Modifica anotaciones..."></textarea>

  <div class="botones-row">
    <button onclick="guardarModificacion()">Guardar Cambios</button>
    <button onclick="mostrarVentana(null)">Cancelar</button>
  </div>
</div>

<script type="module">
  // Código Firebase igual...
  let idPlantelAModificar = null;

  globalThis.modificarPlantel = async (id) => {
    idPlantelAModificar = id;
    const docSnap = await getDocs(collection(db, "planteles"));
    const datos = docSnap.docs.find(d => d.id === id).data();

    // Set checkboxes y anotaciones
    document.querySelectorAll('.mod-checkbox').forEach(cb => {
      cb.checked = datos.documentos?.includes(cb.value) || false;
    });
    document.getElementById("modAnotaciones").value = datos.anotaciones || "";
    mostrarVentana('ventanaModificar');
  };

  globalThis.guardarModificacion = async () => {
    const checks = document.querySelectorAll('.mod-checkbox:checked');
    const documentos = Array.from(checks).map(c => c.value);
    const anotaciones = document.getElementById("modAnotaciones").value;

    await updateDoc(doc(db, "planteles", idPlantelAModificar), {
      documentos,
      anotaciones
    });

    alert("Plantel modificado");
    mostrarVentana(null);
    buscarPlantel();
  };
</script>
